<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HTML5 Canvas</title>
    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <!-- My CSS -->
    <link rel="stylesheet" href="./style.css">
</head>
<body>
        <canvas id="draw" class=""></canvas>

        <div id="legend" class="border d-flex justify-content-center align-items-center">
            <label for="marker-width" class="marker-width">Marker Size</label>
            <input type="range" class="settings marker-width" name="marker-width" min="1" max="10" value="5" data-sizing="px">

            <div id="red-selector" class="color-selector"></div>
            <div id="green-selector" class="color-selector"></div>
            <div id="blue-selector" class="color-selector"></div>
            <div id="black-selector" class="color-selector"></div>
            <div id="pink-selector" class="color-selector"></div>

            <div id="eraser" class="d-flex justify-content-center align-items-center">Eraser</div>
        </div>


    <script>
        //-- Canvas settings
        const canvas = document.querySelector("#draw");
        const ctx = canvas.getContext('2d');
        
        //-- Variables
        let isDrawing = false;
        let lastX = 0;
        let lastY = 0;
        let legendHeight = 80;

        //-- Set the canvas size
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight-legendHeight;
        //-- ??? --- Do we need to indicate the px
        console.log("Canvas width: " + canvas.width);
        console.log("Canvas height: " + canvas.height);
        console.log("InnerHeight: " + window.innerHeight);
        
        window.onresize = function() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight - legendHeight;
        }

        ctx.lineWidth = document.querySelector('input').value * 2;
        ctx.strokeStyle = 'blue';
        ctx.lineJoin = 'round';
        ctx.lineCap = 'round';

        //-- Draw function
        function draw(event) {
            //-- Stop when mouse is not clicked
            if (!isDrawing) return;
            console.log(event);

            //-- Start from
            ctx.moveTo(lastX, lastY);
            //-- Go to
            ctx.lineTo(event.offsetX, event.offsetY);
            ctx.stroke();

            //-- Update last position
            [lastX, lastY] = [event.offsetX, event.offsetY];
        }

        //-- Event Listeners
        canvas.addEventListener('mousemove', draw);
        canvas.addEventListener('mousedown', (event) => { 
            [lastX, lastY] = [event.offsetX, event.offsetY];
            isDrawing = true;
        });
        canvas.addEventListener('mouseup',   () => isDrawing = false);
        canvas.addEventListener('mouseout',  () => isDrawing = false);


        //--- Update size of marker
        const currSettings = document.querySelector(".settings");
        currSettings.addEventListener('click', function(){
            let newWidth = document.querySelector('input').value;
            ctx.lineWidth = newWidth * 2;
            ctx.beginPath();
            ctx.stroke();
        });

        //--- Event Triggers - Red
        const redSelector = document.getElementById("red-selector");
        redSelector.addEventListener('click', () => {
            console.log("Red has been selected");
            ctx.beginPath();
            ctx.strokeStyle = 'red';
        });
        //--- Event Triggers - Green
        const greenSelector = document.getElementById("green-selector");
        greenSelector.addEventListener('click', () => {
            console.log("Green has been selected");
            ctx.beginPath();
            ctx.strokeStyle = 'green';
        });
        //--- Event Triggers - blue
        const blueSelector = document.getElementById("blue-selector");
        blueSelector.addEventListener('click', () => {
            console.log("blue has been selected");
            ctx.beginPath();
            ctx.strokeStyle = 'blue';
        });
        //--- Event Triggers - black
        const blackSelector = document.getElementById("black-selector");
        blackSelector.addEventListener('click', () => {
            console.log("black has been selected");
            ctx.beginPath();
            ctx.strokeStyle = 'black';
        });
        //--- Event Triggers - pink
        const pinkSelector = document.getElementById("pink-selector");
        pinkSelector.addEventListener('click', () => {
            console.log("pink has been selected");
            ctx.beginPath();
            ctx.strokeStyle = 'pink';
        });

        //--- Eraser
        const eraser = document.getElementById("eraser");
        eraser.addEventListener('click', function(){
            console.log('Eraser has been selected');
            ctx.beginPath();
            ctx.strokeStyle = 'white';
        });
    </script>

    <!--
    <script type="text/javascript" src="script.js"></script>      
    -->
</body>
</html>